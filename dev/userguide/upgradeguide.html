
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MetPy 1.0 Upgrade Guide &#8212; MetPy 1.0dev</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.101715efdecc9b59cb6e1ddfa685c31f.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap');
</style>
    
      

    

    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-unidata.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d8bbf5861d671d414e1a.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/doc_shared.js"></script>
    <link rel="shortcut icon" href="../_static/metpy_32x32.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MetPy 1.0 API Changes" href="apichange.html" />
    <link rel="prev" title="MetPy Declarative Syntax Tutorial" href="../tutorials/declarative_tutorial.html" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    <link rel="canonical" href="https://unidata.github.io/MetPy/latest/userguide/upgradeguide.html" />

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
  <nav class="navbar navbar-dark navbar-expand-lg bg-unidata fixed-top bd-navbar shadow" id="navbar-main"><div class="container-xl">

    <a class="navbar-brand" href="../index.html">
    
      <img src="../_static/metpy_horizontal.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>


    <div id="navbar-menu" class="collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">


        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Version 1.0dev
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="version-menu"></div>
        </li>


        
        
        <li class="nav-item active">
            <a class="nav-link" href="index.html">User Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../api/index.html">Reference Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../devel/index.html">Developer’s Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../examples/index.html">Example Gallery</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="SUPPORT.html">Support</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://github.com/Unidata/MetPy/releases">Release Notes<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>


      <form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/Unidata/MetPy" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/MetPy" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
  </nav>


    <div class="container-fluid" id="banner"></div>


    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l2">
  <a class="reference internal" href="installguide.html">
   Install Guide
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="startingguide.html">
   Getting Started with MetPy
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../tutorials/index.html">
   Tutorials
  </a>
 </li>
 <li class="toctree-l2 current active">
  <a class="current reference internal" href="#">
   MetPy 1.0 Upgrade Guide
  </a>
  <ul>
   <li class="toctree-l3">
    <a class="reference internal" href="apichange.html">
     MetPy 1.0 API Changes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="gempak.html">
   GEMPAK Comparison Guide
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="SUPPORT.html">
   Support
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="citing.html">
   Citing MetPy
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="media.html">
   Talks and Other Media
  </a>
 </li>
</ul>
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              

<nav id="bd-toc-nav">
    
</nav>


              
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="metpy-1-0-upgrade-guide">
<h1>MetPy 1.0 Upgrade Guide<a class="headerlink" href="#metpy-1-0-upgrade-guide" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>The 1.0 release marks the first release of MetPy to have what we call a “stable” interface.
This means that code that works with a given release of MetPy 1 should work with all
later versions of MetPy 1. Given those constraints, many of MetPy’s functions changed in
some way in MetPy 1.0. In the majority of these cases, the change was to rename some of
the function parameters for consistency (which only affects users passing in these parameters
as keyword arguments). For more details see the full list of <a class="reference internal" href="apichange.html"><span class="doc">MetPy 1.0 API Changes</span></a>.</p>
<p>The biggest change in MetPy 1.0 is expanded support for xarray <code class="docutils literal notranslate"><span class="pre">DataArray</span></code> instances as
input to MetPy calculation functions. MetPy calculations can now return a <code class="docutils literal notranslate"><span class="pre">DataArray</span></code> when
given such as input, and can also take advantage of the metadata available on a <code class="docutils literal notranslate"><span class="pre">DataArray</span></code>
(such as coordinate information) in order to simplify code. For example, calculating
the geostrophic wind used to look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read data and get the geopotential heights for a single time and level</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">get_test_data</span><span class="p">(</span><span class="s1">&#39;irma_gfs_example.nc&#39;</span><span class="p">,</span> <span class="n">as_file_obj</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">metpy</span><span class="o">.</span><span class="n">parse_cf</span><span class="p">(</span><span class="s1">&#39;Geopotential_height_isobaric&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">isobaric3</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># All the calculations needed for geostrophic wind</span>
<span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">mpcalc</span><span class="o">.</span><span class="n">lat_lon_grid_deltas</span><span class="p">(</span><span class="n">height</span><span class="o">.</span><span class="n">longitude</span><span class="o">.</span><span class="n">metpy</span><span class="o">.</span><span class="n">unit_array</span><span class="p">,</span>
                                    <span class="n">height</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">metpy</span><span class="o">.</span><span class="n">unit_array</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">mpcalc</span><span class="o">.</span><span class="n">coriolis_parameter</span><span class="p">(</span><span class="n">height</span><span class="o">.</span><span class="n">latitude</span><span class="o">.</span><span class="n">metpy</span><span class="o">.</span><span class="n">unit_array</span><span class="p">)</span>
<span class="n">ug</span><span class="p">,</span> <span class="n">vg</span> <span class="o">=</span> <span class="n">mpcalc</span><span class="o">.</span><span class="n">geostrophic_wind</span><span class="p">(</span><span class="n">height</span><span class="o">.</span><span class="n">metpy</span><span class="o">.</span><span class="n">unit_array</span><span class="p">,</span> <span class="n">f</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
</pre></div>
</div>
<p>These last three lines (of calculation) now become:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ug</span><span class="p">,</span> <span class="n">vg</span> <span class="o">=</span> <span class="n">mpcalc</span><span class="o">.</span><span class="n">geostrophic_wind</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information on how to best use xarray, see the <a class="reference internal" href="../tutorials/xarray_tutorial.html"><span class="doc">xarray with MetPy Tutorial</span></a>.</p>
<p>In 1.0, we have also expanded our declarative plotting interface with more capabilities. For
more information, see the <a class="reference internal" href="../tutorials/declarative_tutorial.html"><span class="doc">MetPy Declarative Syntax Tutorial</span></a>.</p>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="../tutorials/declarative_tutorial.html" title="previous page">MetPy Declarative Syntax Tutorial</a>
    <a class='right-next' id="next-link" href="apichange.html" title="next page">MetPy 1.0 API Changes</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.d8bbf5861d671d414e1a.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-92978945-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2008–2021, MetPy Developers. Development supported by National Science Foundation grants AGS-1344155, OAC-1740315, and AGS-1901712.<br/>
        Last updated on Mar 18, 2021 at 17:01:41.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>